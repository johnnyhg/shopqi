= render :partial => "pages/header"

#content
  .container_24
    .grid_24.root
      .grid_5.alpha
        .categories
          .title 产品分类
          .tree
      .grid_19.omega
        %ul.category_product.products_list= render :partial => "pages/product/small", :collection => @products, :as => :product

:javascript
  $().ready(function(){
    $('.tree').jstree({
      plugins : [ "themes", "json_data", "ui"],
      themes: { icons: false, dots: false },
      json_data:{
        ajax: {
          url: '/categories.json',
          data: function (n) { 
            return { id : n.attr ? n.attr("id") : '' }; 
          }
        }
      }
    //selected
    }).bind("select_node.jstree", function (e, data) {
      $.get('/categories/' + data.rslt.obj.attr('id').replace("node_","") + '/products.js', null, null, 'script');
    });
  });
